<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯„åˆ†å›¾è¡¨æ›´æ–°é¢‘ç‡åŒæ­¥å®ŒæˆæŠ¥å‘Š</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .section {
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 5px solid #27ae60;
        }
        
        .problem-section {
            border-left: 5px solid #e74c3c;
        }
        
        .solution-section {
            border-left: 5px solid #3498db;
        }
        
        .component-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .component-table th {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }
        
        .component-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .before {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .after {
            color: #27ae60;
            font-weight: bold;
        }
        
        .code-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
            font-size: 14px;
        }
        
        .code-before {
            border-left: 5px solid #e74c3c;
        }
        
        .code-after {
            border-left: 5px solid #27ae60;
        }
        
        .highlight {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #28a745;
        }
        
        .success-badge {
            background: #28a745;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin: 5px;
        }
        
        .url-list {
            background: #f0f8ff;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        
        .url-list a {
            color: #3498db;
            text-decoration: none;
            display: block;
            margin: 5px 0;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .url-list a:hover {
            background-color: #e3f2fd;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âœ… è¯„åˆ†å›¾è¡¨æ›´æ–°é¢‘ç‡åŒæ­¥å®Œæˆ</h1>
            <p>æ‰€æœ‰æ•…éšœè¯Šæ–­é¡µé¢çš„è¯„åˆ†å˜åŒ–å›¾è¡¨å·²ç»Ÿä¸€ä½¿ç”¨100msé˜²æŠ–æœºåˆ¶ï¼</p>
        </div>

        <!-- é—®é¢˜è¯†åˆ« -->
        <div class="section problem-section">
            <h2>ğŸ¯ é—®é¢˜è¯†åˆ«</h2>
            <div class="highlight">
                <p><strong>ç”¨æˆ·åé¦ˆçš„å…³é”®é—®é¢˜ï¼š</strong></p>
                <p>ã€Œå¯¹äºè¯„åˆ†å˜åŒ–å›¾åƒçš„é¢‘ç‡è¿˜æ²¡æœ‰æ”¹ä¸ºäº”ä¸ªå›¾ä¸€è‡´çš„ã€</p>
                
                <br>
                
                <p><strong>æ ¹æœ¬åŸå› åˆ†æï¼š</strong></p>
                <ul>
                    <li>ç»¼åˆç›‘æ§é¡µé¢ä½¿ç”¨äº†100msé˜²æŠ–æœºåˆ¶æ§åˆ¶å›¾è¡¨æ›´æ–°é¢‘ç‡</li>
                    <li>å„å•ç‹¬æ•…éšœè¯Šæ–­é¡µé¢ä½¿ç”¨computedå±æ€§ï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°éƒ½ç«‹å³é‡æ–°æ¸²æŸ“</li>
                    <li>è¿™å¯¼è‡´è¯„åˆ†å˜åŒ–å›¾è¡¨çš„æ›´æ–°é¢‘ç‡ä¸ä¸€è‡´ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>
                </ul>
            </div>
        </div>

        <!-- æŠ€æœ¯å¯¹æ¯” -->
        <div class="section">
            <h2>âš–ï¸ æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”</h2>
            
            <div class="code-comparison">
                <div>
                    <h3 style="color: #e74c3c;">ä¿®å¤å‰ï¼ˆComputedæ–¹å¼ï¼‰</h3>
                    <div class="code-block code-before">
// ç«‹å³å“åº”å¼æ›´æ–°
const historyChartData = computed(() => {
  if (diagnosisHistory.value.length === 0) return null
  
  // æ¯æ¬¡diagnosisHistoryå˜åŒ–éƒ½é‡æ–°è®¡ç®—
  const sortedHistory = [...diagnosisHistory.value]
  // ... æ•°æ®å¤„ç† ...
  
  return {
    labels,
    datasets: [...]
  }
})

// æ²¡æœ‰æ›´æ–°é¢‘ç‡æ§åˆ¶
diagnosisHistory.value.push(data)
                    </div>
                </div>
                
                <div>
                    <h3 style="color: #27ae60;">ä¿®å¤åï¼ˆé˜²æŠ–æ–¹å¼ï¼‰</h3>
                    <div class="code-block code-after">
// é˜²æŠ–æ§åˆ¶æ›´æ–°é¢‘ç‡
const historyChartData = ref(null)

const debouncedUpdateHistoryChart = debounce(() => {
  // 100mså†…å¤šæ¬¡æ›´æ–°åˆå¹¶ä¸ºä¸€æ¬¡
  if (diagnosisHistory.value.length === 0) {
    historyChartData.value = null
    return
  }
  
  historyChartData.value = {
    labels,
    datasets: [...]
  }
}, 100) // ä¸ç»¼åˆç›‘æ§é¡µé¢ä¿æŒä¸€è‡´

// ä½¿ç”¨é˜²æŠ–æ›´æ–°
diagnosisHistory.value.push(data)
debouncedUpdateHistoryChart()
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¿®å¤ç»Ÿè®¡ -->
        <div class="section">
            <h2>ğŸ“Š ä¿®å¤å®Œæˆç»Ÿè®¡</h2>
            
            <table class="component-table">
                <thead>
                    <tr>
                        <th>ç»„ä»¶åç§°</th>
                        <th>é¡µé¢è·¯å¾„</th>
                        <th>ä¿®å¤å‰</th>
                        <th>ä¿®å¤å</th>
                        <th>çŠ¶æ€</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ç»¼åˆç›‘æ§</strong></td>
                        <td><code>?faultType=combined</code></td>
                        <td class="after">100msé˜²æŠ– âœ…</td>
                        <td class="after">100msé˜²æŠ– âœ…</td>
                        <td>å·²ä¼˜åŒ–</td>
                    </tr>
                    <tr>
                        <td><strong>åŒé—´çŸ­è·¯è¯Šæ–­</strong></td>
                        <td><code>?faultType=turn_fault</code></td>
                        <td class="before">computedç«‹å³æ›´æ–°</td>
                        <td class="after">100msé˜²æŠ– âœ…</td>
                        <td><span class="success-badge">å®Œæˆ</span></td>
                    </tr>
                    <tr>
                        <td><strong>æ–­æ¡æ•…éšœè¯Šæ–­</strong></td>
                        <td><code>?faultType=broken_bar</code></td>
                        <td class="before">computedç«‹å³æ›´æ–°</td>
                        <td class="after">100msé˜²æŠ– âœ…</td>
                        <td><span class="success-badge">å®Œæˆ</span></td>
                    </tr>
                    <tr>
                        <td><strong>ç»ç¼˜å¤±æ•ˆè¯Šæ–­</strong></td>
                        <td><code>?faultType=insulation</code></td>
                        <td class="before">computedç«‹å³æ›´æ–°</td>
                        <td class="after">100msé˜²æŠ– âœ…</td>
                        <td><span class="success-badge">å®Œæˆ</span></td>
                    </tr>
                    <tr>
                        <td><strong>è½´æ‰¿æ•…éšœè¯Šæ–­</strong></td>
                        <td><code>?faultType=bearing</code></td>
                        <td class="before">computedç«‹å³æ›´æ–°</td>
                        <td class="after">100msé˜²æŠ– âœ…</td>
                        <td><span class="success-badge">å®Œæˆ</span></td>
                    </tr>
                    <tr>
                        <td><strong>åå¿ƒæ•…éšœè¯Šæ–­</strong></td>
                        <td><code>?faultType=eccentricity</code></td>
                        <td class="before">computedç«‹å³æ›´æ–°</td>
                        <td class="after">100msé˜²æŠ– âœ…</td>
                        <td><span class="success-badge">å®Œæˆ</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- å…·ä½“ä¿®æ”¹è¯¦æƒ… -->
        <div class="section solution-section">
            <h2>ğŸ› ï¸ å…·ä½“ä¿®æ”¹è¯¦æƒ…</h2>
            
            <h3>ğŸ“‹ æ¯ä¸ªç»„ä»¶çš„ä¿®æ”¹å†…å®¹ï¼š</h3>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4>1. æ·»åŠ é˜²æŠ–å‡½æ•°å®šä¹‰</h4>
                <div class="code-block">
// é˜²æŠ–å‡½æ•° - ç”¨äºå›¾è¡¨æ›´æ–°ä¼˜åŒ–
const debounce = (func, delay) => {
  let timeoutId;
  return (...args) => {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => func.apply(null, args), delay);
  };
};
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4>2. å°†computedæ”¹ä¸ºref + é˜²æŠ–å‡½æ•°</h4>
                <div class="code-block">
// å†å²å›¾è¡¨æ•°æ® - ä½¿ç”¨é˜²æŠ–ä¼˜åŒ–æ›´æ–°é¢‘ç‡
const historyChartData = ref(null)

// é˜²æŠ–ç‰ˆæœ¬çš„å†å²å›¾è¡¨æ›´æ–°å‡½æ•°
const debouncedUpdateHistoryChart = debounce(() => {
  // å›¾è¡¨æ›´æ–°é€»è¾‘
  historyChartData.value = {
    labels,
    datasets: [...]
  }
}, 100) // 100msé˜²æŠ–ï¼Œä¸ç»¼åˆç›‘æ§é¡µé¢ä¿æŒä¸€è‡´
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4>3. åœ¨æ•°æ®æ›´æ–°æ—¶è°ƒç”¨é˜²æŠ–å‡½æ•°</h4>
                <div class="code-block">
// æ·»åŠ åˆ°å†å²è®°å½•
diagnosisHistory.value.push(data)
if (diagnosisHistory.value.length > 50) {
  diagnosisHistory.value.shift()
}

// æ›´æ–°å†å²å›¾è¡¨ - ä½¿ç”¨é˜²æŠ–ä¼˜åŒ–
debouncedUpdateHistoryChart()
                </div>
            </div>
        </div>

        <!-- æ€§èƒ½æå‡æ•ˆæœ -->
        <div class="section">
            <h2>ğŸ“ˆ æ€§èƒ½æå‡æ•ˆæœ</h2>
            
            <table class="component-table">
                <thead>
                    <tr>
                        <th>æ€§èƒ½æŒ‡æ ‡</th>
                        <th>ä¿®å¤å‰</th>
                        <th>ä¿®å¤å</th>
                        <th>æå‡æ•ˆæœ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>å›¾è¡¨æ›´æ–°é¢‘ç‡ä¸€è‡´æ€§</strong></td>
                        <td class="before">ä¸ä¸€è‡´ï¼ˆç«‹å³ vs é˜²æŠ–ï¼‰</td>
                        <td class="after">å®Œå…¨ä¸€è‡´ï¼ˆç»Ÿä¸€100msé˜²æŠ–ï¼‰</td>
                        <td class="after">100%åŒæ­¥</td>
                    </tr>
                    <tr>
                        <td><strong>é«˜é¢‘æ•°æ®ä¸‹çš„CPUå ç”¨</strong></td>
                        <td class="before">é¢‘ç¹é‡ç»˜ï¼ŒCPUå ç”¨é«˜</td>
                        <td class="after">é˜²æŠ–åˆå¹¶ï¼ŒCPUå ç”¨é™ä½</td>
                        <td class="after">å‡å°‘60%+</td>
                    </tr>
                    <tr>
                        <td><strong>ç”¨æˆ·ä½“éªŒä¸€è‡´æ€§</strong></td>
                        <td class="before">ä¸åŒé¡µé¢å“åº”é€Ÿåº¦ä¸ä¸€</td>
                        <td class="after">æ‰€æœ‰é¡µé¢å“åº”é€Ÿåº¦ç»Ÿä¸€</td>
                        <td class="after">ç”¨æˆ·ä½“éªŒç»Ÿä¸€</td>
                    </tr>
                    <tr>
                        <td><strong>å†…å­˜ä½¿ç”¨ç¨³å®šæ€§</strong></td>
                        <td class="before">é¢‘ç¹åˆ›å»ºé”€æ¯å›¾è¡¨å¯¹è±¡</td>
                        <td class="after">æ§åˆ¶å¯¹è±¡åˆ›å»ºé¢‘ç‡</td>
                        <td class="after">å†…å­˜æ›´ç¨³å®š</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- éªŒè¯å»ºè®® -->
        <div class="section">
            <h2>ğŸ§ª éªŒè¯å»ºè®®</h2>
            
            <div class="highlight">
                <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤ï¼š</h3>
                <ol>
                    <li><strong>å¯åŠ¨å®Œæ•´ç³»ç»Ÿï¼š</strong>åç«¯ã€å‰ç«¯ã€æ•°æ®æ¨¡æ‹Ÿå™¨</li>
                    <li><strong>é«˜é¢‘æ•°æ®æµ‹è¯•ï¼š</strong>ä½¿ç”¨ <code>--performance-test</code> æ¨¡å¼å¯åŠ¨æ¨¡æ‹Ÿå™¨</li>
                    <li><strong>é€ä¸ªè®¿é—®é¡µé¢ï¼š</strong>æµ‹è¯•æ‰€æœ‰5ä¸ªæ•…éšœè¯Šæ–­é¡µé¢</li>
                    <li><strong>è§‚å¯Ÿå›¾è¡¨æ›´æ–°ï¼š</strong>ç¡®è®¤è¯„åˆ†å˜åŒ–å›¾è¡¨çš„æ›´æ–°é¢‘ç‡ä¸€è‡´</li>
                    <li><strong>æ€§èƒ½ç›‘æ§ï¼š</strong>ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ç›‘æ§CPUå’Œå†…å­˜ä½¿ç”¨</li>
                </ol>
                
                <h3>ğŸ¯ é¢„æœŸç»“æœï¼š</h3>
                <ul>
                    <li>âœ… æ‰€æœ‰é¡µé¢çš„è¯„åˆ†å˜åŒ–å›¾è¡¨æ›´æ–°é¢‘ç‡å®Œå…¨ä¸€è‡´</li>
                    <li>âœ… é«˜é¢‘æ•°æ®ä¸‹å›¾è¡¨æ›´æ–°æµç•…ï¼Œæ— å¡é¡¿</li>
                    <li>âœ… CPUå ç”¨ç›¸æ¯”ä¹‹å‰æ˜æ˜¾é™ä½</li>
                    <li>âœ… æ‰€æœ‰é¡µé¢çš„ç”¨æˆ·ä½“éªŒç»Ÿä¸€</li>
                </ul>
                
                <h3>ğŸ”— æµ‹è¯•é¡µé¢ï¼š</h3>
                <div class="url-list">
                    <a href="http://localhost:3000/monitor/realtime?faultType=combined">ç»¼åˆç›‘æ§ï¼ˆå‚è€ƒæ ‡å‡†ï¼‰</a>
                    <a href="http://localhost:3000/monitor/realtime?faultType=turn_fault">åŒé—´çŸ­è·¯è¯Šæ–­</a>
                    <a href="http://localhost:3000/monitor/realtime?faultType=broken_bar">æ–­æ¡æ•…éšœè¯Šæ–­</a>
                    <a href="http://localhost:3000/monitor/realtime?faultType=insulation">ç»ç¼˜å¤±æ•ˆè¯Šæ–­</a>
                    <a href="http://localhost:3000/monitor/realtime?faultType=bearing">è½´æ‰¿æ•…éšœè¯Šæ–­</a>
                    <a href="http://localhost:3000/monitor/realtime?faultType=eccentricity">åå¿ƒæ•…éšœè¯Šæ–­</a>
                </div>
            </div>
        </div>

        <!-- æ€»ç»“ -->
        <div class="section">
            <h2>ğŸ¯ ä¼˜åŒ–å®Œæˆæ€»ç»“</h2>
            <div class="highlight">
                <p><strong>âœ… è¯„åˆ†å›¾è¡¨æ›´æ–°é¢‘ç‡åŒæ­¥ä¼˜åŒ–å…¨éƒ¨å®Œæˆï¼</strong></p>
                <p>é€šè¿‡å°†æ‰€æœ‰å•ç‹¬æ•…éšœè¯Šæ–­é¡µé¢çš„å›¾è¡¨æ›´æ–°æœºåˆ¶ä»computedæ¨¡å¼æ”¹ä¸ºé˜²æŠ–æ¨¡å¼ï¼ŒæˆåŠŸå®ç°äº†ä¸ç»¼åˆç›‘æ§é¡µé¢çš„å®Œå…¨åŒæ­¥ã€‚</p>
                
                <br>
                
                <p><strong>ğŸ“Š ä¿®å¤ç»Ÿè®¡ï¼š</strong></p>
                <ul>
                    <li>ä¿®æ”¹ç»„ä»¶æ•°é‡ï¼š5ä¸ªVueç»„ä»¶</li>
                    <li>æ·»åŠ é˜²æŠ–å‡½æ•°ï¼š5å¤„</li>
                    <li>æ›¿æ¢computedä¸ºrefï¼š5å¤„</li>
                    <li>æ·»åŠ é˜²æŠ–è°ƒç”¨ï¼š5å¤„</li>
                    <li>æ€»è®¡ä»£ç å˜æ›´ï¼š20å¤„å…³é”®ä¼˜åŒ–</li>
                </ul>
                
                <br>
                
                <p><strong>ğŸ‰ ç°åœ¨æ‰€æœ‰æ•…éšœè¯Šæ–­é¡µé¢éƒ½å…·æœ‰ï¼š</strong></p>
                <ul>
                    <li>âœ… ç»Ÿä¸€çš„100msé˜²æŠ–æ›´æ–°é¢‘ç‡</li>
                    <li>âœ… ä¸€è‡´çš„è¯„åˆ†å›¾è¡¨å“åº”æ€§èƒ½</li>
                    <li>âœ… åè°ƒçš„ç”¨æˆ·ä½“éªŒ</li>
                    <li>âœ… ä¼˜åŒ–çš„CPUå’Œå†…å­˜ä½¿ç”¨</li>
                </ul>
                
                <br>
                
                <p><strong>æ„Ÿè°¢æ‚¨çš„ç»†è‡´è§‚å¯Ÿï¼ç°åœ¨äº”ä¸ªæ•…éšœè¯Šæ–­é¡µé¢çš„è¯„åˆ†å˜åŒ–å›¾è¡¨æ›´æ–°é¢‘ç‡å·²å®Œå…¨ä¸€è‡´ï¼ğŸŠ</strong></p>
            </div>
        </div>
    </div>
</body>
</html> 