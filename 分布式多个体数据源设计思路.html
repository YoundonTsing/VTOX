<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ åˆ†å¸ƒå¼å¤šä¸ªä½“æ•°æ®æºè®¾è®¡æ€è·¯</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            padding: 40px;
            margin: 20px 0;
        }

        h1 {
            color: #4a90e2;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            color: #2c3e50;
            border-left: 4px solid #4a90e2;
            padding-left: 15px;
            margin: 30px 0 20px 0;
            font-size: 1.8em;
        }

        h3 {
            color: #34495e;
            margin: 25px 0 15px 0;
            font-size: 1.4em;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 5px;
        }

        h4 {
            color: #e74c3c;
            margin: 20px 0 10px 0;
            font-size: 1.2em;
        }

        .status-analysis {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .status-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #007bff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .status-card h4 {
            color: #007bff;
            margin-bottom: 15px;
        }

        .architecture-flow {
            background: #e8f5e8;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #28a745;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.8;
        }

        .best-practices {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .practice-card {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 10px;
            padding: 20px;
            color: white;
            box-shadow: 0 4px 15px rgba(255, 154, 158, 0.3);
        }

        .practice-card h4 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .design-solutions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .solution-card {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            border-radius: 15px;
            padding: 25px;
            color: white;
            box-shadow: 0 8px 25px rgba(132, 250, 176, 0.3);
            transform: translateY(0);
            transition: transform 0.3s ease;
        }

        .solution-card:hover {
            transform: translateY(-5px);
        }

        .solution-card h4 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .tech-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .tech-card {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(255, 234, 167, 0.3);
        }

        .roadmap {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: #2c3e50;
        }

        .roadmap-phase {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #6c5ce7;
        }

        .roadmap-phase h4 {
            color: #6c5ce7;
            margin-bottom: 10px;
        }

        .architecture-recommendation {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .architecture-recommendation h3 {
            color: #fff;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 20px;
        }

        pre {
            background: #2d3748;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            overflow-x: auto;
            margin: 10px 0;
            font-size: 13px;
            line-height: 1.5;
        }

        code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 4px;
            color: #c7254e;
            font-family: 'Courier New', monospace;
        }

        .highlight {
            background: linear-gradient(90deg, rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.1));
            padding: 2px 6px;
            border-radius: 4px;
            border-left: 3px solid #ffc107;
        }

        .emoji {
            font-size: 1.2em;
            margin-right: 8px;
        }

        ul, ol {
            margin: 15px 0;
            padding-left: 25px;
        }

        li {
            margin: 8px 0;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .main-content {
                padding: 20px;
            }

            .status-analysis,
            .best-practices,
            .design-solutions,
            .tech-points {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }

            h2 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <h1><span class="emoji">ğŸ¯</span>åˆ†å¸ƒå¼å¤šä¸ªä½“æ•°æ®æºè®¾è®¡æ€è·¯</h1>

            <h2><span class="emoji">ğŸ“Š</span>ç°çŠ¶åˆ†æ</h2>
            
            <div class="status-analysis">
                <div class="status-card">
                    <h4><span class="emoji">ğŸ”„</span>å½“å‰æ¶æ„ (å•ä½“æ¨¡æ‹Ÿå™¨)</h4>
                    <div class="architecture-flow">
turn_fault_simulator.py
    â†“ WebSocket
åç«¯ main.py (WebSocketå¤„ç†)
    â†“ Simple/Redis Queue
å®æ—¶è¯Šæ–­åˆ†æ
                    </div>
                </div>

                <div class="status-card">
                    <h4><span class="emoji">ğŸ¯</span>ç›®æ ‡æ¶æ„ (åˆ†å¸ƒå¼å¤šä¸ªä½“)</h4>
                    <div class="architecture-flow">
å¤šä¸ªè½¦è¾†æ¨¡æ‹Ÿå™¨ (Vehicle_001, Vehicle_002, ...)
    â†“ HTTP REST API
åç«¯ diagnosis-stream API
    â†“ Redis Stream
åˆ†å¸ƒå¼æ¶ˆè´¹è€…ç»„å¤„ç†
                    </div>
                </div>
            </div>

            <h2><span class="emoji">ğŸ—ï¸</span>ä¸šç•Œæœ€ä½³å®è·µ</h2>

            <div class="best-practices">
                <div class="practice-card">
                    <h4><span class="emoji">1ï¸âƒ£</span>IoTè®¾å¤‡æ¨¡æ‹Ÿå™¨æ¨¡å¼ (æ¨è)</h4>
                    <pre><code class="python"># æ¯ä¸ªè½¦è¾† = ç‹¬ç«‹çš„æ¨¡æ‹Ÿå™¨è¿›ç¨‹
class VehicleSimulator:
    def __init__(self, vehicle_id, api_endpoint):
        self.vehicle_id = vehicle_id
        self.api_endpoint = api_endpoint
    
    async def start_simulation(self):
        while True:
            sensor_data = self.generate_sensor_data()
            await self.send_to_api(sensor_data)
            await asyncio.sleep(self.interval)</code></pre>
                </div>

                <div class="practice-card">
                    <h4><span class="emoji">2ï¸âƒ£</span>å¾®æœåŠ¡æ¶æ„æ¨¡å¼</h4>
                    <ul>
                        <li><strong>æ•°æ®ç”ŸæˆæœåŠ¡</strong> - è´Ÿè´£ä¼ æ„Ÿå™¨æ•°æ®æ¨¡æ‹Ÿ</li>
                        <li><strong>æ•°æ®å‘é€æœåŠ¡</strong> - è´Ÿè´£APIè°ƒç”¨å’Œé‡è¯•æœºåˆ¶</li>
                        <li><strong>åè°ƒæœåŠ¡</strong> - ç®¡ç†å¤šä¸ªè½¦è¾†çš„å¯åŠ¨åœæ­¢</li>
                    </ul>
                </div>

                <div class="practice-card">
                    <h4><span class="emoji">3ï¸âƒ£</span>äº‘åŸç”Ÿæ¨¡å¼</h4>
                    <ul>
                        <li>æ¯ä¸ªè½¦è¾†ä½œä¸ºç‹¬ç«‹å®¹å™¨</li>
                        <li>æ”¯æŒåŠ¨æ€æ‰©ç¼©å®¹</li>
                        <li>é…ç½®å’ŒçŠ¶æ€å¤–éƒ¨åŒ–</li>
                    </ul>
                </div>
            </div>

            <h2><span class="emoji">ğŸ¨</span>å…·ä½“è®¾è®¡æ–¹æ¡ˆ</h2>

            <div class="design-solutions">
                <div class="solution-card">
                    <h4><span class="emoji">ğŸ“¦</span>æ–¹æ¡ˆ1: å•è¿›ç¨‹å¤šè½¦è¾† (ç®€å•å¼€å§‹)</h4>
                    <pre><code class="python">class MultiVehicleSimulator:
    def __init__(self, vehicle_count=10):
        self.vehicles = [
            VehicleAgent(f"V{i:03d}") 
            for i in range(1, vehicle_count+1)
        ]
    
    async def start_all(self):
        tasks = [vehicle.simulate() for vehicle in self.vehicles]
        await asyncio.gather(*tasks)</code></pre>
                </div>

                <div class="solution-card">
                    <h4><span class="emoji">âš¡</span>æ–¹æ¡ˆ2: å¤šè¿›ç¨‹åè°ƒ (ç”Ÿäº§çº§)</h4>
                    <pre><code class="python">class DistributedVehicleFleet:
    def __init__(self, fleet_config):
        self.fleet_config = fleet_config
        self.processes = []
    
    def spawn_vehicle(self, vehicle_config):
        process = Process(target=run_vehicle, args=(vehicle_config,))
        self.processes.append(process)
        process.start()</code></pre>
                </div>

                <div class="solution-card">
                    <h4><span class="emoji">ğŸ”§</span>æ–¹æ¡ˆ3: åŸºäºé…ç½®é©±åŠ¨ (æœ€çµæ´»)</h4>
                    <pre><code class="yaml"># fleet_config.yaml
vehicles:
  - id: "BJ_001"
    location: "åŒ—äº¬"
    fault_profile: "normal"
    send_interval: 2.0
  - id: "SH_002" 
    location: "ä¸Šæµ·"
    fault_profile: "bearing_fault"
    send_interval: 1.5</code></pre>
                </div>
            </div>

            <h2><span class="emoji">ğŸ”§</span>æŠ€æœ¯å®ç°å…³é”®ç‚¹</h2>

            <div class="tech-points">
                <div class="tech-card">
                    <h4><span class="emoji">1ï¸âƒ£</span>æ•°æ®å‘é€ç­–ç•¥</h4>
                    <pre><code class="python"># å¼‚æ­¥æ‰¹é‡å‘é€
async def batch_send_data(vehicles_data):
    tasks = []
    for vehicle_id, data in vehicles_data.items():
        task = send_vehicle_data(vehicle_id, data)
        tasks.append(task)
    
    results = await asyncio.gather(*tasks, return_exceptions=True)
    return results</code></pre>
                </div>

                <div class="tech-card">
                    <h4><span class="emoji">2ï¸âƒ£</span>æ•…éšœæ³¨å…¥å’Œåœºæ™¯æ¨¡æ‹Ÿ</h4>
                    <pre><code class="python"># åŠ¨æ€æ•…éšœæ³¨å…¥
class FaultScenarioManager:
    def __init__(self):
        self.scenarios = {
            "normal_operations": {"fault_rate": 0.05},
            "maintenance_day": {"fault_rate": 0.3},
            "extreme_weather": {"fault_rate": 0.8}
        }
    
    def apply_scenario(self, scenario_name):
        # åŠ¨æ€è°ƒæ•´è½¦è¾†æ•…éšœå‚æ•°
        pass</code></pre>
                </div>

                <div class="tech-card">
                    <h4><span class="emoji">3ï¸âƒ£</span>è´Ÿè½½å‡è¡¡å’Œé™æµ</h4>
                    <pre><code class="python"># æ™ºèƒ½å‘é€é—´éš”
class AdaptiveRateLimiter:
    def __init__(self, max_qps=100):
        self.max_qps = max_qps
        self.current_load = 0
    
    async def throttle(self):
        if self.current_load > self.max_qps:
            await asyncio.sleep(1.0 / self.max_qps)</code></pre>
                </div>
            </div>

            <h2><span class="emoji">ğŸ“‹</span>æ¨èå®æ–½è·¯çº¿å›¾</h2>

            <div class="roadmap">
                <div class="roadmap-phase">
                    <h4><span class="emoji">ğŸš€</span>é˜¶æ®µ1: å¿«é€ŸåŸå‹ (1-2å¤©)</h4>
                    <ol>
                        <li>åˆ›å»º <code>MultiVehicleSimulator</code> ç±»</li>
                        <li>å¤ç”¨ç°æœ‰çš„æ•°æ®ç”Ÿæˆé€»è¾‘</li>
                        <li>é›†æˆRedis Stream APIè°ƒç”¨</li>
                        <li>æ”¯æŒ3-5ä¸ªè½¦è¾†å¹¶å‘</li>
                    </ol>
                </div>

                <div class="roadmap-phase">
                    <h4><span class="emoji">â­</span>é˜¶æ®µ2: å¢å¼ºåŠŸèƒ½ (3-5å¤©)</h4>
                    <ol>
                        <li>æ·»åŠ è½¦è¾†é…ç½®æ–‡ä»¶æ”¯æŒ</li>
                        <li>å®ç°æ•…éšœåœºæ™¯ç®¡ç†</li>
                        <li>æ·»åŠ æ€§èƒ½ç›‘æ§å’ŒæŒ‡æ ‡</li>
                        <li>æ”¯æŒ10-20ä¸ªè½¦è¾†</li>
                    </ol>
                </div>

                <div class="roadmap-phase">
                    <h4><span class="emoji">ğŸ†</span>é˜¶æ®µ3: ç”Ÿäº§ä¼˜åŒ– (1å‘¨)</h4>
                    <ol>
                        <li>å¤šè¿›ç¨‹æ¶æ„</li>
                        <li>å®¹é”™å’Œé‡è¯•æœºåˆ¶</li>
                        <li>åŠ¨æ€æ‰©ç¼©å®¹</li>
                        <li>æ”¯æŒ100+è½¦è¾†</li>
                    </ol>
                </div>
            </div>

            <div class="architecture-recommendation">
                <h3><span class="emoji">ğŸ¯</span>æ¨èæ¶æ„å‡çº§è·¯å¾„</h3>
                <p class="highlight">åŸºäºç°æœ‰ä»£ç åŸºç¡€ï¼Œé‡‡ç”¨<strong>æ¸è¿›å¼æ¶æ„å‡çº§</strong>ï¼š</p>
                
                <div class="architecture-flow" style="background: rgba(255, 255, 255, 0.1); color: white; margin: 20px 0;">
ç¬¬ä¸€æ­¥: é€‚é…å™¨æ¨¡å¼
turn_fault_simulator.py â†’ RedisStreamAdapter â†’ diagnosis-stream API

ç¬¬äºŒæ­¥: å¤šè½¦è¾†æ¨¡å¼  
MultiVehicleSimulator[è½¦è¾†1..N] â†’ Redis Stream API

ç¬¬ä¸‰æ­¥: åˆ†å¸ƒå¼æ¨¡å¼
ç‹¬ç«‹è½¦è¾†è¿›ç¨‹[fleet] â†’ åè°ƒå™¨ â†’ Redis Stream
                </div>

                <p><strong>ä¼˜åŠ¿:</strong> ä¿æŒç°æœ‰ä»£ç å¤ç”¨æ€§ï¼Œé€æ­¥æ¼”è¿›åˆ°åˆ†å¸ƒå¼æ¶æ„</p>
                <p><strong>å»ºè®®:</strong> ä»<span class="highlight">é˜¶æ®µ1çš„é€‚é…å™¨æ¨¡å¼</span>å¼€å§‹ï¼Œå¿«é€ŸéªŒè¯Redis Stream APIé›†æˆæ•ˆæœ</p>
            </div>

        </div>

        <div class="footer">
            <p>ğŸš€ Redis Stream åˆ†å¸ƒå¼è¯Šæ–­ç³»ç»Ÿ - è½¦è”ç½‘å¤šä¸ªä½“æ•°æ®æºæ¶æ„è®¾è®¡ ğŸš€</p>
            <p>Â© 2025 ç”µæœºæ•…éšœè¯Šæ–­ç³»ç»Ÿ - æ€§èƒ½ä¼˜åŒ–ä¸åˆ†å¸ƒå¼å‡çº§æ–¹æ¡ˆ</p>
        </div>
    </div>
</body>
</html> 